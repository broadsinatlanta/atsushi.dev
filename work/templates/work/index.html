{% extends 'home/layout.html' %}
{% load static extra_tags %}

{% block stylesheet %}
    <link rel="stylesheet" href="{% static 'work/css/index.css' %}">
{% endblock %}

{% block title %}
    All Projects
{% endblock %}

{% block main %}
    <h1>Project Index</h1>
    {% if user.is_authenticated %}
        <h2><a href="{% url 'new-project' %}">New</a></h2>
    {% endif %}

    <div uk-filter="target: .js-filter">
        <h3>Filter</h3>
        <ul class="uk-subnav uk-subnav-pill">
            <li uk-filter-control=".tag-all"><a href="#">All</a></li>
            {% for l in langs %}
                <li uk-filter-control=".tag-{{ l|lower }}"><a href="#">{{ l }}</a></li>
            {% endfor %}

            {% for t in techs %}
                {% with lower_t=t|lower %}
                    <li uk-filter-control=".tag-{{ lower_t|replace_space }}"><a href="#">{{ t }}</a></li>
                {% endwith %}
            {% endfor %}
        </ul>

        <ul class="js-filter uk-text-center uk-child-width-1-1@s" uk-grid>
            {% for p in all_projects %}
                <li class="uk-width-1-3@s tag-all {% for l in p.get_languages %}tag-{{ l|lower }} {% endfor %} {% for t in p.get_stack %}{% with lower_t=t|lower %} tag-{{ lower_t|replace_space }} {% endwith %}{% endfor %}">
                    <div class="uk-width-1-1">
                        <div class="uk-card uk-card-primary uk-card-body uk-margin-small">
                            <h3 class="uk-card-title"><a href="{% url 'view-project' p.url_slug %}">{{ p.name }}</a></h3>
                            <p>{{ p.description }}</p>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}

